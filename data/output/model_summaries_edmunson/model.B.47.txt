toutes les 10mins on reprend ces 5 etapes grace a la commande crontab e dans le shell bash qui executera ses fichiers python 1 on execute camera.py qui prend une photo de la circulation et enregistre image.jpg 2 on execute count.py qui compte le nombre de voitures de la camera en traitant image.jpg et renvoie le nombre dans route1.txt route1.txt contient le nombre de voitures de la route 1 route2.txt contient le nombre de voitures de la route 2 qui est un fichier recu de la deuxieme carte root placee sur lautre voie 3 on envoie le fichier route1.txt vers lautre carte root de la deuxieme voie 4 on execute compute.py qui fait la difference entre les entiers contenus dans route1.txt et route2.txt en renvoie le resultat dans final.txt final.txt 0 si route1 route2 final.txt 1 si route1 route2 egalement compute.py fait la somme des entiers contenus dans route1.txt et route2.txt en renvoie le resultat dans history.txt history.txt contient donc lhistorique du flux dans le carrefour toutes les 10mins chatbotdata.txt contient aussi le flux nombre de voitures durant les 30 dernieres minutes 5 on execute raspi.py qui lit la valeur contenue dans final.txt et fait varie la duree dallumage des feux vert et rouge en fonction de la valeur lue 0 ou 1 6 server.py est un fichier qui sexecute a chaque demarrage de la carte instructions incluse dans le fichier homepi.profile ainsi elle constitue un serveur qui est ouvert au port 8220 et qui repond aux requetes des utilisateurs a la demande grace a lapplication mobile qui a ete developpe pour cette cause.