alternative documentation can be found at httpsunidesksdk.readthedocs.ioenlatest citrix app layering powershell sdk beta install and update install manually install psgallery update psgallery connect and disconnect connect disconnect finalize layer task status get task status cancel task operating system layers import operating system vcenter citrix hypervisor xenserver new operating system layer version remove operating system layer revision application layers new application layer new application layer version set application layer remove application layer revision platform layers new platform layer new platform layer version remove platform layer revision images get image composition create new image edit image remove image publish image clone image application assignments add app layers to an image remove app layers from an image add usergroup to elastic layers remove usergroup from elastic layers icons get icon ids export all icons save as png get icon associations create new icon remove icon export and import layers export layers import layers directory junction new directory junction get all directory junctions get directory junction info set directory junction info delete directory junction user info local users set local admin password system info get system information version get system settings connectors vcenter install and update install manually install psgallery update psgallery connect and disconnect connect disconnect finalize layer task status get task status get all tasks get specific task based on id accepts wildcard cancel task locate id of task operating system layers import operating system vcenter citrix hypervisor xenserver thanks dan feller powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myxenserver shares getalremoteshare websession websession xen command xenvm getxenvm name vmname response importaloslayer websession websession vmname vmname connectorid connector.id shareid fileshare.id name windows 2016 version 1.0 vmid xenvm.uuid hypervisor xenserver new operating system layer version powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter oss getaloslayer websession websessionwhere.name eq windows 2016 standard osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 myosrev newaloslayerrev websession websession version 2.0 connectorid connector.id osid oss.id osrevid osrevid.id diskformat connector.validdiskformats.diskformat shareid fileshare.id keep checking for change in task do status getalstatus websession websession id myosrev.workticketid startsleep seconds 5 until status.state eq actionrequired use function to extract vm name from status message getalvmname message status.workitems.workitemresult.status remove operating system layer revision powershell fileshare getalremoteshare websession websession osid getaloslayer websession websession where.name eq windows 10 x64 osrevid getaloslayerdetail websession websession id osid.id osrevid osrevid.revisions.oslayerrevisiondetail where.candelete eq true sortobject displayedversion descending select last 1 removealoslayerrev websession websession osid osid.id osrevid osrevid.id fileshareid fileshare.id application layers new application layer powershell connector getalconnector websession websession type createwhere.name eq myvcenter fileshare getalremoteshare websession websession oss getaloslayer websession websessionwhere.name eq windows 10 x64 osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 newalapplayer websession websession version 1.0 name accounting app description accounting application connectorid connector.id osrevid osrevid.id diskformat connector.validdiskformats.diskformat oslayerswitching boundtooslayer fileshareid fileshare.id new application layer version powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter app getalapplayer websession websessionwhere.name eq 7zip oss getaloslayer websession websession osrevs getaloslayerdetail websession websession id app.associatedoslayerid osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 apprevs getalapplayerdetail websession websession id app.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 newalapplayerrev websession websession version 9.0 name app.name connectorid connector.id appid app.id apprevid apprevid.id osrevid osrevid.id diskformat connector.validdiskformats.diskformat fileshareid fileshare.id set application layer powershell app getalapplayer websession websessionwhere.name eq 7zip setalapplayer websession websession name 7zip description 7zip id app.id scriptpath cneededscript.ps1 oslayerswitching boundtooslayer remove application layer revision powershell fileshare getalremoteshare websession websession appid getalapplayer websession websession where.name eq 7zip apprevid getalapplayerdetail websession websession id appid.id apprevid apprevid.revisions.applayerrevisiondetail where.candelete eq true sortobject displayedversion descending select first 1 removealapplayerrev websession websession appid appid.id apprevid apprevid.id fileshareid fileshare.id platform layers new platform layer powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter oss getaloslayer websession websessionwhere.name eq windows 2016 standard osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 newalplatformlayer websession websession osrevid osrevid.id name citrix xa vda 7.18 connectorid connector.id shareid fileshare.id diskformat connector.validdiskformats.diskformat type create new platform layer version powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter oss getaloslayer websession websessionwhere.name eq windows 10 x64 osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 plats getalplatformlayer websession websessionwhere.name eq windows 10 vda platrevs getalplatformlayerdetail websession websession id plats.id platformrevid platrevs.revisions.platformlayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 params websession websession osrevid osrevid.id connectorid connector.id shareid fileshare.id layerid plats.id layerrevid platformrevid.id version 5.0 diskname plats.name verbose true description citrix vda 7.18 with windows 10 diskformat connector.validdiskformats.diskformat newalplatformlayerrev params remove platform layer revision powershell fileshare getalremoteshare websession websession platformid getalplatformlayer websession websession where.name eq windows 10 vda platformrevid getalplatformlayerdetail websession websession id platformid.id platformrevid platformrevid.revisions.platformlayerrevisiondetail where.candelete eq true sortobject displayedversion descending select first 1 removealplatformlayerrev websession websession platformid platformid.id platformrevid platformrevid.id fileshareid fileshare.id images get image composition powershell image getalimagecomp websession websession name windows 10 accounting image.oslayer image.platformlayer image.applayer create new image powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter oss getaloslayer websession websessionwhere.name eq windows 10 x64 osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 plats getalplatformlayer websession websessionwhere.name eq windows 10 vda platrevs getalplatformlayerdetail websession websession id plats.id platformrevid platrevs.revisions.platformlayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 application ids apps winscp7zip appids foreach app in apps applayerid getalapplayer websession websessionwhere.name eq app apprevs getalapplayerdetail websession websession id applayerid.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 appids apprevid.id newalimage websession websession name windows 10 accounting description accounting connectorid connector.id osrevid osrevid.id appids appids platrevid platformrevid.id diskformat connector.validdiskformats.diskformat elasticlayermode session edit image powershell fileshare getalremoteshare websession websession connector getalconnector websession websession type createwhere.name eq myvcenter oss getaloslayer websession websessionwhere.name eq windows 10 x64 osrevs getaloslayerdetail websession websession id oss.id osrevid osrevs.revisions.oslayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 plats getalplatformlayer websession websessionwhere.name eq windows 10 vda platrevs getalplatformlayerdetail websession websession id plats.id platformrevid platrevs.revisions.platformlayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 image getalimage websession websessionwhere.name eq windows 10 accounting setalimage websession websession name images.name description my new description connectorid connector.id osrevid osrevid.id platrevid platformrevid.id id image.id elasticlayermode session diskformat connector.validdiskformats.diskformat edit image with latest revision for a specific app or apps powershell apps winscp7zip applayerids foreach app in appsgetalapplayer websession websessionwhere.name eq app apprevs foreach applayerid in applayeridsgetalapplayerdetail websession websession id applayerid.id apprevid foreach apprev in apprevsapprev.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 setalimage websession websession name images.name description my new description connectorid connector.id osrevid osrevid.id platrevid platformrevid.id id image.id elasticlayermode session diskformat connector.validdiskformats.diskformat applayerid apprevid.layerid apprevid apprevid.id remove image powershell image getalimage websession websessionwhere.name eq windows 10 accounting removealimage websession websession imageid image.id publish image powershell image getalimage websession websessionwhere.name eq windows 10 accounting invokealpublish websession websession imageid image.id clone image powershell image getalimage websession websession where .name eq windows 10 accounting newalimageclone websession websession imageid image.id confirmfalse outvariable alimageclone application assignments add app layers to an image powershell image getalimage websession websessionwhere.name eq accounting app getalapplayer websession websessionwhere.name eq libre office apprevs getalapplayerdetail websession websession id app.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 addalappassignment websession websession apprevid apprevid.id imageid image.id remove app layers from an image powershell image getalimage websession websessionwhere.name eq accounting app getalapplayer websession websessionwhere.name eq libre office apprevs getalapplayerdetail websession websession id app.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 removealappassignment websession websession applayerid apprevid.layerid imageid image.id add usergroup to elastic layers powershell users mygroup1mygroup2domain users finduser usersgetalldapobject websession websession app getalapplayer websession websessionwhere.name eq libre office apprevs getalapplayerdetail websession websession id app.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 add finduseraddalelappassignment websession websession apprevid apprevid.id remove usergroup from elastic layers powershell users mygroup1mygroup2domain users finduser usersgetalldapobject websession websession app getalapplayer websession websessionwhere.name eq libre office apprevs getalapplayerdetail websession websession id app.id apprevid apprevs.revisions.applayerrevisiondetailwhere.state eq deployablesortobject displayedversion descendingselect first 1 finduserremovealelappassignment websession websession apprevid apprevid.id icons get icon ids powershell getalicon websession websession export all icons save as png powershell icons getalicon websession websession foreachicon in icons no authentication needed to grab image invokewebrequest uri icon.url outfile dtempicons icon.iconid.png get icon associations powershell getaliconassoc websession websession iconid 196608 create new icon powershell iconfile dtempiconsmyiconpic.png temp newalicon websession websession iconfile iconfile verbose remove icon powershell removealicon websession websession iconid 4259840 export and import layers gets exportable layers powershell mypath mynaslayershare getalexportablerev websession websession sharepath mypath gets exportable layers including ones that are already present powershell mypath mynaslayershare getalexportablerev websession websession sharepath mypath showall gets importable layers powershell mypath mynaslayershare getalimportablerev websession websession sharepath mypath gets importable layers including ones that are already present powershell mypath mynaslayershare getalimportablerev websession websession sharepath mypath showall export layers exports all exportable layers to fileshare powershell mypath mynaslayershare getalexportablerev websession websession sharepath mypathexportallayerrev websession websession sharepath mypath exports all exportable layers to fileshare with authenication.