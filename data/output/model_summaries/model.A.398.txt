usb and sdcard firmware flashing for the arduino atmega 2560 and adk master branch is sdcard flash bootloaderfromflash is flash from an spi chip mechanics the bootloader looks for byte in eeprom at address 0x1ff if it is set to 0xf0 bootloader will look for a bin file on the sdcard named firmware.bin and use it to flash the firmware then reset the byte to 0xff so it does this only once otherwise no action is taken and bootloader works as a arduino bootloader except some of the debugging functions are missing setup adafruit micro sdcard 5v ready sdcard on atmega 2560 or adk pin 50 do pin 51 di pin 52 clk pin 53 cs if you have an sd card shield which is different from this setup you need to change the pinout in asmfunc.s and recompile the bootloader flashing bootloader copy the entire hardware folder to your mydocumentsarduino folder restart arduino ide you should now see under tools boards arduino mega 2560 dual sd bootloader select this set the appropriate programmer burn bootloader using arduino isp bootloader connect arduino atmega 2560 upload sketch arduino isp found in file examples atmega2560 to atmega 2560 connections programmer receiver pin 50 pin 50 pin 51 pin 51 pin 52 pin 52 pin 53 reset 5v 5v ground ground aditionally on programmer you have to put a capacitor between reset and ground 2.2microf works if you dont do this it wont work compile bootloader install crosspack httpwww.obdev.atproductscrosspackindex.html navigate to my documentsarduinohardwaremicrobridgebootladersmicrobridge issue make clean make all bootloader output size after avr memory usage device atmega2560 program 6116 bytes 2.3 full .text .data .bootloader data 333 bytes 4.1 full .data .bss .noinit generate bin file to generate a bin file you need issue the following command on you apps elf executable avrobjcopy i elf32avr o binary firmware.cpp.elf firmware.bin this generates firmware.bin which can be put on the sd for flashing your firmware.