for the sake of simplicity in this particular case were going to deploy the mysql helm chart to our cluster as well and we need a secret for grafana to access the password sh first create the namespace if its not there already kubectl create ns thanos then create the secret kubectl n thanos apply f .examplesgrafanasecrets.yaml finally install thanos sh helm upgrade install namespace thanos thanos .thanos wait timeout 600 f examplesvalues3.yaml setfile objectstorethanosstorageconfig.yaml uninstalling sh helm del purge thanos kubectl delete crd prometheuses.monitoring.coreos.com kubectl delete crd prometheusrules.monitoring.coreos.com kubectl delete crd servicemonitors.monitoring.coreos.com kubectl delete crd podmonitors.monitoring.coreos.com kubectl delete crd alertmanagers.monitoring.coreos.com todo x remove peering options deprecated on thanos 0.4.0 x remove some not very useful options leave sane defaults x servicemonitors for thanos components x figure out how to store grafana stuff on an external db tls improve config x service discovery inside the cluster x service discovery across clusters x dynamic prometheus replica label for deduplication see 2591 x recommended rules for thanos components x recommended dashboards for thanos components x thanos as datasource in grafana x objectstore config as file x ingresses x reporeleases useful resources httpsitnext.iomonitoringkubernetesworkloadswithprometheusandthanos4ddb394b32c